<?php
session_start();

if(!isset($_SESSION['balance'])){
    $_SESSION['balance'] = 0;
}

$min_balance = 500;
$message = "";

if(isset($_POST['deposit'])){
    $amount = (int)$_POST['amount'];

    if($amount > 0){
        $_SESSION['balance'] += $amount;
        $_SESSION['msg'] = "‚Çπ$amount Deposited Successfully!";
    }

    header("Location: ".$_SERVER['PHP_SELF']); // ‚≠ê redirect
    exit();
}

if(isset($_POST['withdraw'])){
    $amount = (int)$_POST['amount'];
    $balance = $_SESSION['balance'];
    $available = $balance - $min_balance;

    if($amount > 0 && $amount <= $available){
        $_SESSION['balance'] -= $amount;
        $_SESSION['msg'] = "‚Çπ$amount Withdrawn Successfully!";
    } else {
        $_SESSION['msg'] = "Insufficient balance! You can withdraw only ‚Çπ$available";
    }

    header("Location: ".$_SERVER['PHP_SELF']); // ‚≠ê redirect
    exit();
}

$balance = $_SESSION['balance'];

if(isset($_SESSION['msg'])){
    $message = $_SESSION['msg'];
    unset($_SESSION['msg']); // show once only
}
?>

<!DOCTYPE html>
<html>
<head>
<title>Wallet</title>
</head>
<body style="text-align:center; margin-top:80px; font-family:Arial;">

<h2>Wallet Balance: ‚Çπ<?php echo $balance; ?></h2>

<form method="post">
    <input type="number" name="amount" placeholder="Enter Amount" required>
    <br><br>
    <button name="deposit">Deposit</button>
    <button name="withdraw">Withdraw</button>
</form>

<h3 style="color:green;"><?php echo $message; ?></h3>

</body>
</html>
















----------------------------------------------------------

<?php
session_start();

// Initial balance (only first time)
if(!isset($_SESSION['balance'])) {
    $_SESSION['balance'] = 10000; // starting amount
}

$message = "";

// Deposit
if(isset($_POST['deposit'])) {
    $amount = $_POST['amount'];
    $_SESSION['balance'] += $amount;
    $message = "‚Çπ$amount Deposited Successfully!";
}

// Withdraw
if(isset($_POST['withdraw'])) {
    $amount = $_POST['amount'];

    if($amount > $_SESSION['balance']) {
        $message = "Insufficient Balance!";
    } else {
        $_SESSION['balance'] -= $amount;
        $message = "‚Çπ$amount Withdrawn Successfully!";
    }
}
?>

<!DOCTYPE html>
<html>
<head>
    <title>Mini Bank System</title>
    <style>
        body {
            font-family: Arial;
            background: linear-gradient(to right, #11998e, #38ef7d);
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
        .bank-box {
            background: white;
            padding: 25px;
            width: 320px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }
        input {
            width: 90%;
            padding: 8px;
            margin: 8px 0;
        }
        button {
            padding: 8px 15px;
            margin: 5px;
            border: none;
            color: white;
            border-radius: 5px;
            cursor: pointer;
        }
        .deposit { background: green; }
        .withdraw { background: red; }
        .balance {
            font-size: 20px;
            margin-bottom: 10px;
            color: blue;
        }
        .msg {
            margin-top: 10px;
            font-weight: bold;
        }
    </style>
</head>
<body>

<div class="bank-box">
    <h2>üè¶ My Bank Account</h2>

    <div class="balance">
        Balance: ‚Çπ <?php echo number_format($_SESSION['balance'], 2); ?>
    </div>

    <form method="POST">
        <input type="number" name="amount" placeholder="Enter amount" required>
        <br>
        <button class="deposit" name="deposit">Deposit</button>
        <button class="withdraw" name="withdraw">Withdraw</button>
    </form>

    <div class="msg"><?php echo $message; ?></div>
</div>

</body>
</html>
